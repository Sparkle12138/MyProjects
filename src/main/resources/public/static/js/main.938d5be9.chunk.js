(this.webpackJsonptwitchfe=this.webpackJsonptwitchfe||[]).push([[0],{143:function(e,t,r){},175:function(e,t,r){"use strict";r.r(t);var s=r(0),c=r.n(s),a=r(124),n=r.n(a),i=(r(143),r(177)),o=r(133),l=r(185),j=r(193),d=r(194);const h="",m="".concat(h,"/login"),b="".concat(h,"/register"),u="".concat(h,"/logout"),O="".concat(h,"/game"),x="".concat(h,"/game?game_name="),g="".concat(h,"/search?game_id="),p=e=>fetch("".concat(g).concat(e)).then((e=>{if(200!==e.status)throw Error("Fail to find the game");return e.json()})),f=e=>(e=>fetch("".concat(x).concat(e)).then((e=>{if(200!==e.status)throw Error("Fail to find the game");return e.json()})))(e).then((e=>{if(e&&e[0].id)return p(e[0].id);throw Error("Fail to find the game")})),y="".concat(h,"/favorite"),v=()=>fetch(y,{credentials:"include"}).then((e=>{if(200!==e.status)throw Error("Fail to get favorite item");return e.json()})),w="".concat(h,"/recommendation");var S=r(178),F=r(179),C=r(67),I=r(7);var P=function(e){let{items:t}=e;return null===t||void 0===t?void 0:t.map((e=>Object(I.jsx)(l.a.Item,{children:Object(I.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:"".concat(e.broadcaster_name," - ").concat(e.title)})},e.id)))},k=r(186),_=r(187),E=r(135),T=r(188),R=r(189);const{SubMenu:L}=l.a;var q=function(e){let{favoriteItems:t}=e;const[r,c]=Object(s.useState)(!1),{videos:a,streams:n,clips:i}=t;return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(C.a,{type:"primary",shape:"round",onClick:()=>{c(!0)},icon:Object(I.jsx)(_.a,{}),children:"My Favorites"}),Object(I.jsx)(k.a,{title:"My Favorites",placement:"right",width:720,visible:r,onClose:()=>{c(!1)},children:Object(I.jsxs)(l.a,{mode:"inline",defaultOpenKeys:["streams"],style:{height:"100%",borderRight:0},selectable:!1,children:[Object(I.jsx)(L,{icon:Object(I.jsx)(E.a,{}),title:"Streams",children:Object(I.jsx)(P,{items:n})},"streams"),Object(I.jsx)(L,{icon:Object(I.jsx)(T.a,{}),title:"Videos",children:Object(I.jsx)(P,{items:a})},"videos"),Object(I.jsx)(L,{icon:Object(I.jsx)(R.a,{}),title:"Clips",children:Object(I.jsx)(P,{items:i})},"clips")]})})]})},J=r(184),N=r(181),M=r(183),U=r(190),D=r(191);var V=function(){const[e,t]=Object(s.useState)(!1);return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(C.a,{shape:"round",type:"primary",onClick:()=>{t(!0)},children:"Register"}),Object(I.jsx)(J.a,{title:"Register",visible:e,onCancel:()=>{t(!1)},footer:null,destroyOnClose:!0,children:Object(I.jsxs)(N.a,{name:"normal_register",initialValues:{remember:!0},onFinish:e=>{(e=>fetch(b,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>{if(200!==e.status)throw Error("Fail to register")})))(e).then((()=>{t(!1),o.b.success("Successfully signed up")})).catch((e=>{o.b.error(e.message)}))},preserve:!1,children:[Object(I.jsx)(N.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(I.jsx)(M.a,{prefix:Object(I.jsx)(U.a,{}),placeholder:"Username"})}),Object(I.jsx)(N.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(I.jsx)(M.a,{prefix:Object(I.jsx)(D.a,{}),placeholder:"Password"})}),Object(I.jsx)(N.a.Item,{name:"first_name",rules:[{required:!0,message:"Please input your Firstname!"}],children:Object(I.jsx)(M.a,{placeholder:"firstname"})}),Object(I.jsx)(N.a.Item,{name:"last_name",rules:[{required:!0,message:"Please input your Lastname!"}],children:Object(I.jsx)(M.a,{placeholder:"lastname"})}),Object(I.jsx)(N.a.Item,{children:Object(I.jsx)(C.a,{type:"primary",htmlType:"submit",children:"Register"})})]})})]})};var A=function(e){let{onSuccess:t}=e;const[r,c]=Object(s.useState)(!1);return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(C.a,{shape:"round",onClick:()=>{c(!0)},style:{marginRight:"20px"},children:"Login"}),Object(I.jsx)(J.a,{title:"Log in",visible:r,onCancel:()=>{c(!1)},footer:null,destroyOnClose:!0,children:Object(I.jsxs)(N.a,{name:"normal_login",onFinish:e=>{(e=>{const t=new FormData;return t.append("username",e.username),t.append("password",e.password),fetch(m,{method:"POST",credentials:"include",body:t}).then((e=>{if(204!==e.status)throw Error("Fail to log in")}))})(e).then((()=>{c(!1),o.b.success("Welcome back"),t()})).catch((e=>{o.b.error(e.message)}))},preserve:!1,children:[Object(I.jsx)(N.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(I.jsx)(M.a,{prefix:Object(I.jsx)(U.a,{}),placeholder:"Username"})}),Object(I.jsx)(N.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(I.jsx)(M.a.Password,{prefix:Object(I.jsx)(D.a,{}),placeholder:"Password"})}),Object(I.jsx)(N.a.Item,{children:Object(I.jsx)(C.a,{type:"primary",htmlType:"submit",children:"Login"})})]})})]})};const{Header:B}=i.a;var G=function(e){let{loggedIn:t,signoutOnClick:r,signinOnSuccess:s,favoriteItems:c}=e;return Object(I.jsx)(B,{children:Object(I.jsxs)(S.a,{justify:"space-between",children:[Object(I.jsx)(F.a,{children:t&&Object(I.jsx)(q,{favoriteItems:c})}),Object(I.jsxs)(F.a,{children:[t&&Object(I.jsx)(C.a,{shape:"round",onClick:r,children:"Logout"}),!t&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(A,{onSuccess:s}),Object(I.jsx)(V,{})]})]})]})})},H=r(114);var K=function(e){let{onSuccess:t}=e;const[r,c]=Object(s.useState)(!1);return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(C.a,{shape:"round",onClick:()=>{c(!0)},icon:Object(I.jsx)(H.a,{}),style:{marginLeft:"20px",marginTop:"20px"},children:"Custom Search"}),Object(I.jsx)(J.a,{title:"Search",visible:r,onCancel:()=>{c(!1)},footer:null,children:Object(I.jsxs)(N.a,{name:"custom_search",onFinish:e=>{f(e.game_name).then((e=>{c(!1),t(e)})).catch((e=>{o.b.error(e.message)}))},children:[Object(I.jsx)(N.a.Item,{name:"game_name",rules:[{required:!0,message:"Please enter a game name"}],children:Object(I.jsx)(M.a,{placeholder:"Game name"})}),Object(I.jsx)(N.a.Item,{children:Object(I.jsx)(C.a,{type:"primary",htmlType:"submit",children:"Search"})})]})})]})},W=r(130),z=r(105),Q=r(180),X=r(182),Y=r(192);const{TabPane:Z}=W.a,$="stream",ee="videos",te="clips",re=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3?arguments[3]:void 0;const c="".concat(e.broadcaster_name," - ").concat(e.title),a=r.find((t=>t.twitch_id===e.twitch_id));return Object(I.jsxs)(I.Fragment,{children:[t&&Object(I.jsx)(z.a,{title:a?"Remove from favorite list":"Add to favorite list",children:Object(I.jsx)(C.a,{shape:"circle",icon:a?Object(I.jsx)(_.a,{}):Object(I.jsx)(Y.a,{}),onClick:()=>{var t;a?(t=e,fetch(y,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({favorite:t})}).then((e=>{if(200!==e.status)throw Error("Fail to delete favorite item")}))).then((()=>{s()})).catch((e=>{o.b.error(e.message)})):(e=>fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({favorite:e})}).then((e=>{if(200!==e.status)throw Error("Fail to add favorite item")})))(e).then((()=>{s()})).catch((e=>{o.b.error(e.message)}))}})}),Object(I.jsx)("div",{style:{overflow:"hidden",textOverflow:"ellipsis",width:450},children:Object(I.jsx)(z.a,{title:c,children:Object(I.jsx)("span",{children:c})})})]})},se=(e,t,r,s)=>Object(I.jsx)(Q.b,{grid:{xs:1,sm:2,md:4,lg:4,xl:6},dataSource:e,renderItem:e=>{return Object(I.jsx)(Q.b.Item,{style:{marginRight:"20px"},children:Object(I.jsx)(X.a,{title:re(e,t,r,s),children:Object(I.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",style:{width:"100%",height:"100%"},children:Object(I.jsx)("img",{alt:"Placeholder",src:(c=e.thumbnail_url,c.replace("%{height}","252").replace("%{width}","480").replace("{height}","252").replace("{width}","480")),style:{width:"100%",height:"100%"}})})})});var c}});var ce=e=>{let{resources:t,loggedIn:r,favoriteItems:s,favoriteOnChange:c}=e;const{videos:a,streams:n,clips:i}=t,{videos:o,streams:l,clips:j}=s;return Object(I.jsxs)(W.a,{defaultActiveKey:$,children:[Object(I.jsx)(Z,{tab:"Streams",forceRender:!0,children:se(n,r,l,c)},$),Object(I.jsx)(Z,{tab:"Videos",forceRender:!0,children:se(a,r,o,c)},ee),Object(I.jsx)(Z,{tab:"Clips",forceRender:!0,children:se(i,r,j,c)},te)]})};const{Header:ae,Content:ne,Sider:ie}=i.a;var oe=function(){const[e,t]=Object(s.useState)(!1),[r,c]=Object(s.useState)([]),[a,n]=Object(s.useState)([]),[h,m]=Object(s.useState)({videos:[],streams:[],clips:[]});return Object(s.useEffect)((()=>{fetch(O).then((e=>{if(200!==e.status)throw Error("Fail to get top games");return e.json()})).then((e=>{n(e)})).catch((e=>{o.b.error(e.message)}))}),[]),Object(I.jsxs)(i.a,{children:[Object(I.jsx)(ae,{children:Object(I.jsx)(G,{loggedIn:e,signoutOnClick:()=>{fetch(u,{method:"POST",credentials:"include"}).then((e=>{if(204!==e.status)throw Error("Fail to log out")})).then((()=>{t(!1),o.b.success("Successfully Signed out")})).catch((e=>{o.b.error(e.message)}))},signinOnSuccess:()=>{t(!0),v().then((e=>{c(e)}))},favoriteItems:r})}),Object(I.jsxs)(i.a,{children:[Object(I.jsxs)(ie,{width:300,className:"site-layout-background",children:[Object(I.jsx)(K,{onSuccess:e=>{m(e)}}),Object(I.jsx)(l.a,{mode:"inline",onSelect:e=>{let{key:t}=e;"recommendation"!==t?p(t).then((e=>{m(e)})):fetch(w,{credentials:"include"}).then((e=>{if(200!==e.status)throw Error("Fail to get recommended item");return e.json()})).then((e=>{m(e)}))},style:{marginTop:"10px"},items:(e=>[{label:"Recommend for you!",key:"recommendation",icon:Object(I.jsx)(j.a,{})},{label:"Popular Games",key:"popular_games",icon:Object(I.jsx)(d.a,{}),children:e.map((e=>({label:e.name,key:e.id,icon:Object(I.jsx)("img",{alt:"placeholder",src:e.box_art_url.replace("{height}","40").replace("{width}","40"),style:{borderRadius:"50%",marginRight:"20px"}})})))}])(a)})]}),Object(I.jsx)(i.a,{style:{padding:"24px"},children:Object(I.jsx)(ne,{className:"site-layout-background",style:{padding:24,margin:0,height:800,overflow:"auto"},children:Object(I.jsx)(ce,{resources:h,loggedIn:e,favoriteOnChange:()=>{v().then((e=>{c(e)})).catch((e=>{o.b.error(e.message)}))},favoriteItems:r})})})]})]})};var le=e=>{e&&e instanceof Function&&r.e(3).then(r.bind(null,195)).then((t=>{let{getCLS:r,getFID:s,getFCP:c,getLCP:a,getTTFB:n}=t;r(e),s(e),c(e),a(e),n(e)}))};n.a.createRoot(document.getElementById("root")).render(Object(I.jsx)(c.a.StrictMode,{children:Object(I.jsx)(oe,{})})),le()}},[[175,1,2]]]);
//# sourceMappingURL=main.938d5be9.chunk.js.map